let r=!0,o=!0;class n{constructor(i,e=null){this.dom=i,this.messages=e,this.submitButton=this.dom.querySelector(".btn_submit"),this.radioInputs=this.dom.querySelectorAll('input[type="radio"]'),this.checkboxInputs=this.dom.querySelectorAll('input[type="checkbox"]'),this.attachEventListeners()}attachEventListeners(){const i=this;this.dom.addEventListener("input",e=>{e.target.matches("input, select, textarea")&&(this.validateField(e.target),this.check())}),this.dom.addEventListener("change",e=>{e.target.matches("input, select, textarea")&&(this.validateField(e.target),this.check())}),this.dom.addEventListener("blur",e=>{e.target.matches("input, select, textarea")&&this.validateField(e.target)},!0),this.check()}validateField(i){if(!this.messages)return;const e=i.name,a=i.value.trim(),l=i.type,t=this.dom.querySelector(`[data-error="${e}"]`);if(!t)return;let s="";if(l==="checkbox"&&i.required&&!i.checked?s=this.messages.validation[e+"_required"]||this.messages.validation.checkbox_required||"\u3053\u306E\u9805\u76EE\u306F\u5FC5\u9808\u3067\u3059\u3002":i.required&&a===""?s=this.messages.validation[e+"_required"]||this.messages.validation.input_required||"\u3053\u306E\u9805\u76EE\u306F\u5FC5\u9808\u3067\u3059\u3002":l==="email"&&a!==""&&!this.isValidEmail(a)?s=this.messages.validation.email_invalid:l==="tel"&&a!==""&&!this.isValidTel(a)?s=this.messages.validation.tel_invalid:l==="url"&&a!==""&&!this.isValidUrl(a)&&(s=this.messages.validation.url_invalid),e==="email2"){const d=this.dom.querySelector('input[name="email"]');d&&a!==d.value.trim()&&(s=this.messages.validation.email2_not_match||"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u304C\u4E00\u81F4\u3057\u307E\u305B\u3093\u3002")}s?(t.textContent=s,t.classList.add("show"),i.classList.add("error")):(t.textContent="",t.classList.remove("show"),i.classList.remove("error"))}isValidEmail(i){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)}isValidTel(i){return/^[0-9\-]+$/.test(i)}isValidUrl(i){try{return new URL(i),!0}catch{return!1}}check(){r=!0,this.dom.querySelectorAll("input:required, select:required, textarea:required").forEach(t=>{if(t.offsetParent===null)return;const s=t.value.trim(),d=t.type;if(s===""){r=!1;return}(d==="email"&&!this.isValidEmail(s)||d==="tel"&&!this.isValidTel(s)||d==="url"&&!this.isValidUrl(s))&&(r=!1)});const e=this.dom.querySelector('input[name="email"]'),a=this.dom.querySelector('input[name="email2"]');e&&a&&e.value.trim()!==a.value.trim()&&(r=!1);const l=new Set;this.radioInputs.forEach(t=>{t.required&&t.name&&l.add(t.name)}),l.forEach(t=>{this.dom.querySelector(`input[name="${t}"]:checked`)||(r=!1)}),this.checkboxInputs.forEach(t=>{t.required&&t.offsetParent!==null&&(t.checked||(r=!1))}),!r||!o?(this.submitButton.classList.add("disable"),this.submitButton.disabled=!0):(this.submitButton.classList.remove("disable"),this.submitButton.disabled=!1)}}export{n as default};
