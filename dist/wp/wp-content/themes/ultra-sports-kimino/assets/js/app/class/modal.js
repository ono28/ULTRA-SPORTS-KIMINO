class i{constructor(o="#modal"){if(this._body=document.body,this._modal=document.querySelector(o),this._scrollY=0,this.isOpen=!1,!this._modal)throw new Error("modal not found")}_delay(o){return new Promise(t=>{const e=performance.now();function s(l){l-e>=o?t():requestAnimationFrame(s)}requestAnimationFrame(s)})}_removeAction(o){o.classList.remove("action"),o.style.transitionDelay=""}_lockScroll(){this._scrollY=window.scrollY,this._body.classList.add("noscroll"),this._body.style.top=`-${this._scrollY}px`}_unlockScroll(){this._body.classList.remove("noscroll"),this._body.style.top="",window.scrollTo(0,this._scrollY)}_activateBody(o){this._modal.querySelectorAll(".modal_body").forEach(t=>t.classList.toggle("active",t.id===o))}_deactivateBodies(){this._modal.querySelectorAll(".modal_body").forEach(o=>o.classList.remove("active"))}open(o){this.isOpen||(this.isOpen=!0,this._activateBody(o),this._lockScroll(),this._modal.classList.add("active"))}async close(){this.isOpen&&(this.isOpen=!1,this._unlockScroll(),this._modal.classList.remove("active"),this._deactivateBodies(),this._body.style.top="",window.scrollTo(0,this._scrollY),await this._delay(300),this._modal.querySelectorAll("[data-target]").forEach((o,t)=>{this._removeAction(o)}))}}export{i as default};
