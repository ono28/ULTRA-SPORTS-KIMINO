class a{constructor(t,{toggle:s=!1,rootMargin:i="0px",delay:r=200}={}){this.dom=t,this.toggle=s,this.rootMargin=i,this.delay=r,this.lazyObjectObserver=null,this.initObserver()}update(t){t&&this.lazyObjectObserver&&this.lazyObjectObserver.observe(t)}initObserver(){if("IntersectionObserver"in window&&!this.lazyObjectObserver){const t={rootMargin:this.rootMargin};this.lazyObjectObserver=new IntersectionObserver(s=>{let i=0;s.forEach((r,l)=>{const e=r.target;if(!e.dataset.ignore)if(r.isIntersecting){requestAnimationFrame(()=>{i++,e.style.transitionDelay=`${this.delay*i}ms`,e.classList.add("action")});const n=()=>{e.style.transitionDelay="",e.removeEventListener("transitionend",n)};e.addEventListener("transitionend",n)}else this.toggle&&requestAnimationFrame(()=>{e.classList.remove("action")})})},t),this.dom.forEach(s=>{this.lazyObjectObserver.observe(s)})}}}export{a as default};
