import{Intersection as m}from"../vendor/splidejs-splide-extension-intersection.min.js";import{AutoScroll as f}from"../vendor/splidejs-splide-extension-auto-scroll.min.js";import{Splide as w}from"../vendor/splidejs-splide.min.js";import p from"./class/scrollClass.js";import{utils as n}from"./utils/util.js";const r=document.documentElement,s=document.body,y=document.getElementById("loading"),i=document.getElementById("globalHeader"),a=document.getElementById("btnMenu"),c=document.getElementById("globalNavi"),d=window.APP||(window.APP={});function v(){let e=!1,t;a.addEventListener("click",()=>{e=!e,c.classList.toggle("active"),a.classList.toggle("active"),e?(t=window.scrollY,s.style.top=`${-t}px`,s.classList.add("noscroll")):(s.classList.remove("noscroll"),s.style.top="",window.scrollTo(0,t),c.querySelectorAll("[data-target]").forEach(o=>{n.removeAction(o)}))}),c.addEventListener("click",o=>{if(!o.target.closest(".inner")){if(!e)return;c.classList.remove("active"),a.classList.remove("active"),s.classList.remove("noscroll"),s.style.top="",window.scrollTo(0,t),setTimeout(()=>{e=!1,c.querySelectorAll("[data-target]").forEach(l=>{n.removeAction(l)})},100)}})}function h(){const e=s.dataset.page;e&&document.querySelectorAll(".nav").forEach(t=>{t.classList.toggle("active",t.classList.contains(`n_${e}`))})}function L(){const e=document.querySelectorAll(".acc");e.length!=0&&e.forEach(t=>{const o=t.querySelector(".acc_trigger"),l=t.querySelector(".acc_body");n.slideUp(l,0),o.addEventListener("click",()=>{n.slideToggle(l,300)})})}function S(){const e=document.querySelectorAll(".splide");e.length!=0&&e.forEach(t=>{const o=new w(t,{type:"loop",arrows:!1,pagination:!1,drag:!1,autoWidth:!0,autoScroll:{speed:1,pauseOnHover:!1},intersection:{inView:{autoScroll:!0},outView:{autoScroll:!1}},breakpoints:{760:{autoScroll:{speed:.7}}}});o.on("mounted",()=>{t.querySelectorAll("[data-lzy]").forEach(l=>{d.LZY.update(l)})}),o.mount({AutoScroll:f,Intersection:m})})}function E(){window.addEventListener("scroll",()=>{window.scrollY>100?i.classList.add("white"):i.classList.remove("white")})}async function A(){n.setFillHeight(),n.getScrollbarWidth(),v(),h(),L(),S(),E(),await n.delay(200),y.classList.add("hide"),r.classList.remove("loading"),await n.delay(300);const e=document.querySelectorAll("[data-target]");e.length>0&&(d.SC=new p(e,{rootMargin:"-10% 0px",delay:100}))}r.classList.add("loading"),window.addEventListener("DOMContentLoaded",()=>{if(A(),window.location.hash){const e=window.location.hash.substring(1),t=document.getElementById(e);t&&i&&setTimeout(()=>{const o=i.offsetHeight,l=t.getBoundingClientRect(),u=window.pageYOffset||document.documentElement.scrollTop,g=l.top+u-o;window.scrollTo({top:g,behavior:"auto"})},10)}});
